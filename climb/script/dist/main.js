import{BG_tile_imgs,DrawTile,clearScreen}from"./render.js";import{Map}from"./map.js";import{Player}from"./player.js";const player=new Player,camera={x:0,y:0},map=new Map;function drawMap(e,a,r=0,t=0){for(const[i,o]of Object.entries(a)){const a=parseInt(i,16);if(!(a>12))for(let i=e.x-7;i<=e.x+7;i++){const e=o[i];if("number"==typeof e)DrawTile(BG_tile_imgs[e],i+r,a+t);else if(null!==e&&"object"==typeof e){const o=e.id,n=e.xflip,m=e.yflip;if("number"!=typeof o)continue;DrawTile(BG_tile_imgs[o],i+r,a+t,n,m)}}}}let lastTime=performance.now(),tick=0;function gameLoop(e){requestAnimationFrame(gameLoop),lastTime=e,tick++,tick%2!=0&&(clearScreen(),drawMap(camera,map.data),player.CharacterDraw())}requestAnimationFrame(gameLoop);