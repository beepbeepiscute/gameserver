const canvas=document.getElementById("screen"),ctx=canvas.getContext("2d");ctx.imageSmoothingEnabled=!1;export const SCREEN_SIZE_X=15;export const SCREEN_SIZE_Y=12;export const TILE_SIZE=22;export function GetTilePos(e,t){const a=canvas.width/15,i=canvas.height/12,n=Math.floor(7*a);return{x:Math.ceil(n+e*a),y:Math.ceil(t*i),w:Math.ceil(a),h:Math.ceil(i)}}export const BG_tile_imgs={isLoaded:!1};export const Char_tile_imgs={isLoaded:[!1,!1]};const BGimg=new Image;BGimg.src="./Assets/Image/BG.png";const Charimg_cup=new Image,Charimg_kris=new Image;function createTile(e,t,a,i,n,o=1){const c=document.createElement("canvas");c.width=Math.round(i*o),c.height=Math.round(n*o);const r=c.getContext("2d");return r.imageSmoothingEnabled=!1,r.drawImage(e,Math.round(t),Math.round(a),Math.round(i),Math.round(n),0,0,c.width,c.height),c}function OnImageLoad(e,t,a,i,n=0){let o=n;for(let n=0;n<i;n++)for(let i=0;i<a;i++)t[o++]=createTile(e,22*i,22*n,22,22)}BGimg.onload=()=>{OnImageLoad(BGimg,BG_tile_imgs,24,25),BG_tile_imgs.isLoaded=!0},Charimg_cup.onload=()=>{OnImageLoad(Charimg_cup,Char_tile_imgs,8,2),Char_tile_imgs.isLoaded[0]=!0,Charimg_kris.onload=()=>{OnImageLoad(Charimg_kris,Char_tile_imgs,8,3,Object.keys(Char_tile_imgs).length-1),Char_tile_imgs.isLoaded[1]=!0,console.log("charimgload")},Charimg_kris.src="./Assets/Image/kris.png"},Charimg_cup.src="./Assets/Image/cuptain.png";export function clearScreen(){ctx.clearRect(0,0,canvas.width,canvas.height)}export function DrawTile(e,t,a,i=!1,n=!1){if(!e)return;const o=GetTilePos(t,a);ctx.save(),ctx.translate(o.x+o.w/2,o.y+o.h/2),ctx.scale(i?-1:1,n?-1:1),ctx.imageSmoothingEnabled=!1,ctx.drawImage(e,-o.w/2,-o.h/2,o.w,o.h),ctx.restore()}